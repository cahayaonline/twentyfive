<%@ Title="CahayaOnline - Orders" %>
<com:TContent ID="titlecontent">
    <i class="icon-shopping-cart"></i> Orders</h1>
</com:TContent>
<com:TContent ID="titledesccontent">
    Order members
</com:TContent>
<com:TContent ID="csscontent">
<link rel="stylesheet" href="<%=$this->page->theme->baseUrl%>/assets/data-tables/DT_bootstrap.css">
</com:TContent>
<com:TContent ID="maincontent">
<com:TPanel Visible="<%= $this->getViewProcess(false) %>" CssClass="row-fluid">             
    <div class="span12">
        <div class="box box-black">
            <div class="box-title">
                <h3><i class="icon-shopping-cart"></i> Detail Order #<%=$this->dataOrder['order_id']%></h3>
                <div class="box-tool">
                    <com:TActiveLinkButton ID="btnDelete" Text="Hapus" OnClick="deleteRecord" CssClass="btn btn-danger" Enabled="<%=$this->dataOrder['order_status_id'] == 5?false:true%>">
                        <prop:ClientSide.OnPreDispatch>
                            $('loading').show();                            
                        </prop:ClientSide.OnPreDispatch>					
                        <prop:ClientSide.onLoading>                                    
                            $('<%=$this->btnDelete->clientId%>').disabled='disabled';
                        </prop:ClientSide.onLoading>
                        <prop:ClientSide.onComplete>						                    
                            $('<%=$this->btnDelete->clientId%>').disabled='';                            
                            $('loading').hide();
                        </prop:ClientSide.OnComplete>
                    </com:TActiveLinkButton>
                    <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                     
                    <com:TActiveLinkButton ID="btnClose" OnClick="closeViewOrder" Text="<i class='icon-remove'></i>">
                        <prop:ClientSide.OnPreDispatch>
                            $('loading').show();
                        </prop:ClientSide.OnPreDispatch>					
                        <prop:ClientSide.onLoading>                                    
                            $('<%=$this->btnClose->clientId%>').disabled='disabled';
                        </prop:ClientSide.onLoading>
                        <prop:ClientSide.onComplete>						                    
                            $('<%=$this->btnClose->clientId%>').disabled='';
                            $('loading').hide();
                        </prop:ClientSide.OnComplete>
                    </com:TActiveLinkButton>
                </div>
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#tab-2-1" data-toggle="tab">Summary Order</a></li>
                    <li><a href="#tab-2-2" data-toggle="tab">Payment Details</a></li>
                    <li><a href="#tab-2-3" data-toggle="tab">Shipping Details</a></li>
                    <li><a href="#tab-2-4" data-toggle="tab">Products</a></li>
                </ul>
            </div>
            <div class="box-content">
                <div class="tab-content">
                    <div class="tab-pane active" id="tab-2-1">
                        <dl>
                            <dt>Order ID: </dt>
                            <dd>#<%=$this->dataOrder['order_id']%></dd>
                            <dt>Invoice No.: </dt>
                            <dd>-</dd>                            
                            <dt>No. Ibo: </dt>
                            <dd><%=$this->dataOrder['ibo']%></dd>
                            <dt>Member Name: </dt>
                            <dd><%=$this->dataOrder['member_name']%></dd>
                            <dt>Total Unit Price: </dt>
                            <dd><%=$this->finance->toRupiah ($this->dataOrder['totalunitprice'])%></dd>
                            <dt>Total Omset: </dt>
                            <dd><%=$this->finance->toRupiah ($this->dataOrder['totalomset'])%></dd>
                            <dt>Total Price: </dt>
                            <dd><%=$this->finance->toRupiah ($this->dataOrder['totalprice'])%></dd>
                            <dt>Order Status: </dt>
                            <dd><%=$this->dataOrder['order_status']%></dd>
                            <dt>Data Added: </dt>
                            <dd><%=$this->TGL->tanggal ('d F Y H:m:s',$this->dataOrder['date_added'])%></dd>
                            <dt>Date Modified: </dt>
                            <dd><%=$this->TGL->tanggal ('d F Y H:m:s',$this->dataOrder['date_modified'])%></dd>
                        </dl>                         
                    </div>
                    <div class="tab-pane" id="tab-2-2">
                        <dl>
                            <dt>Payment Method: </dt>
                            <dd><%=$this->dataOrder['payment_name']%></dd>
                        </dl>                       
                    </div>
                    <div class="tab-pane" id="tab-2-3">
                        -
                    </div>
                    <div class="tab-pane" id="tab-2-4">
                        <com:TActiveRepeater ID="RepeaterProduct">
                            <prop:HeaderTemplate>			
                                <table class="table table-striped table-bordered">	
                                    <thead>
                                    <tr>												
                                        <th width="200">Product</th>
                                        <th width="100" scope="col">Model</th>
                                        <th scope="col">QTY</th>
                                        <th scope="col">Unit Price</th>																		
                                        <th scope="col">Total Unit <br />Price</th>																																		
                                        <th scope="col">Laba (%)</th>																																		
                                        <th scope="col">Omset</th>
                                        <th scope="col">Total Price</th>		                            
                                    </tr>								
                                    </thead>
                                    <tbody>
                            </prop:HeaderTemplate>
                            <prop:ItemTemplate>
                                <tr>
                                    <td class="left"><%#$this->DataItem['name']%></td>
                                    <td class="left"><%#$this->DataItem['model']%></td>
                                    <td class="center"><%#$this->DataItem['quantity']%></td>
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['price'])%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['total'])%></td>																						
                                    <td class="center"><%#$this->DataItem['reward']%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['omset'])%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['totalprice'])%></td>																						
                                </tr>
                            </prop:ItemTemplate>				
                            <prop:AlternatingItemTemplate>
                                <tr>
                                    <td class="left"><%#$this->DataItem['name']%></td>
                                    <td class="left"><%#$this->DataItem['model']%></td>
                                    <td class="center"><%#$this->DataItem['quantity']%></td>
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['price'])%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['total'])%></td>																						
                                    <td class="center"><%#$this->DataItem['reward']%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['omset'])%></td>																						
                                    <td class="right"><%#$this->page->finance->toRupiah($this->DataItem['totalprice'])%></td>																						
                                </tr>
                            </prop:AlternatingItemTemplate>
                            <prop:FooterTemplate>
                                <tr class="footer">
                                    <td colspan="7" class="right">Total</td>
                                    <td class="right"><%=$this->page->finance->toRupiah($this->Page->dataOrder['totalprice'])%></td>
                                </tr>
                                </tbody>
                                </table>
                            </prop:FooterTemplate>	
                             <prop:EmptyTemplate>                                
                                <div class="alert alert-info">                                   
                                    <p>Tidak ada product yang dipesan.</p>
                                </div>
                            </prop:EmptyTemplate>
                        </com:TActiveRepeater>
                    </div>
                </div>                
            </div>
        </div>    
    </div>    
</com:TPanel>
<com:TActivePanel Visible="<%= $this->getEditProcess(false) %>">             
    <com:TActiveHiddenField ID="hiddenproductid" />
    <com:TActiveHiddenField ID="hiddenstock" />
    <div class="row-fluid">
        <div class="span12">
            <div class="box">
                <div class="box-title">
                    <h3><i class="icon-group"></i> Member Information</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                     
                        <com:TActiveLinkButton ID="btnCancel" OnClick="closeViewOrder" Text="<i class='icon-remove'></i>">
                            <prop:ClientSide.OnPreDispatch>
                                $('loading').show();
                            </prop:ClientSide.OnPreDispatch>					
                            <prop:ClientSide.onLoading>                                    
                                $('<%=$this->btnCancel->clientId%>').disabled='disabled';
                            </prop:ClientSide.onLoading>
                            <prop:ClientSide.onComplete>						                    
                                $('<%=$this->btnCancel->clientId%>').disabled='';
                                $('loading').hide();
                            </prop:ClientSide.OnComplete>
                        </com:TActiveLinkButton>
                    </div>
                </div>
                <div class="box-content">
                    <dl>
                        <dt>IBO</dt>
                        <dd><%= $this->dataMember['ibo']%></dd>
                        <dt>Nama</dt>
                        <dd><%= $this->dataMember['member_name']%></dd>
                    </dl>                        
                </div>
            </div>
        </div>
    </div>    
    <div class="row-fluid">
        <div class="span12">
            <div class="box">
                <div class="box-title">
                    <h3><i class="icon-plus"></i> Tambah Produk</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                        
                        <a href="#" data-action="close"><i class="icon-remove"></i></a>
                    </div>
                </div>
                <div class="box-content">
                    <div class="control-group">
                        <com:TLabel ForControl="txtProductName" CssClass="control-label" Text="Pilih Produk" />                                        
                        <div class="controls">                            
                            <com:TAutoComplete ID="txtProductName" OnSuggest="suggestProduct" OnSuggestionSelected="productSuggetionSelected" ResultPanel.CssClass="acomplete" Suggestions.DataKeyField="product_id" CssClass="smallInput" Columns="30"></td>
                                <prop:Suggestions.ItemTemplate>
                                    <li><%# $this->Data['product_name']%></li>
                               </prop:Suggestions.ItemTemplate>
                                <prop:ClientSide.OnPreDispatch>
                                    $('loadingproduct').show();
                                </prop:ClientSide.OnPreDispatch>					
                                <prop:ClientSide.onLoading>                                                                
                                </prop:ClientSide.onLoading>
                                <prop:ClientSide.onComplete>						
                                    $('loadingproduct').hide();                            
                                </prop:ClientSide.OnComplete>                  
                              </com:TAutoComplete> 
                              <com:TActiveLinkButton Text="List Product" OnClick="showListProduct" ClientSide.PostState="false"> 
                                    <prop:ClientSide.OnPreDispatch>
                                        $('loadingproduct').show();
                                    </prop:ClientSide.OnPreDispatch>					
                                    <prop:ClientSide.onLoading>                                                                
                                    </prop:ClientSide.onLoading>
                                    <prop:ClientSide.onComplete>						
                                        $('loadingproduct').hide();                            
                                    </prop:ClientSide.OnComplete>  
                              </com:TActiveLinkButton>
                              <com:TRequiredFieldValidator ValidationGroup="addproducttocart" Display="Dynamic" ControlToValidate="hiddenproductid" ErrorMessage="You did not enter product name or product name is incorect"/>  
                              <img id="loadingproduct" src="<%=$this->Page->Theme->baseUrl%>/img/ajax-loader-1.gif" style="display:none;" /> 
                        </div>
                    </div>                    
                    <div class="control-group">
                        <com:TLabel ForControl="txtQTY" CssClass="control-label" Text="Quantity" />                                        
                        <div class="controls"> 
                            <com:TActiveTextBox ID="txtQTY" CssClass="input-mini" Text="1" Attributes.OnKeyUp="formatangka(this,false)" />                    
                            <com:TRequiredFieldValidator ValidationGroup="addproducttocart" Display="Dynamic" ControlToValidate="txtQTY" FocusOnError="true" ErrorMessage="You did not enter quantity product"/>  
                        </div>
                    </div>
                    <div class="control-group">
                        <com:TLabel ForControl="txtLaba" CssClass="control-label" Text="Laba (%)" />                                        
                        <div class="controls"> 
                            <com:TActiveTextBox ID="txtLaba" CssClass="input-mini" Text="0" Attributes.OnKeyUp="formatangka(this,false)" />                    
                            <com:TRequiredFieldValidator ValidationGroup="addproducttocart" Display="Dynamic" ControlToValidate="txtLaba" FocusOnError="true" ErrorMessage="You did not enter laba each product"/>  
                        </div>
                    </div>
                    <div class="form-actions">
                        <com:TActiveButton ID="btnAddProduct" Text="Tambah" OnClick="addProduct" ValidationGroup="addproducttocart" CssClass="btn btn-primary">
                            <prop:ClientSide.OnPreDispatch>
                                $('loading').show();
                            </prop:ClientSide.OnPreDispatch>					
                            <prop:ClientSide.onLoading>                                    
                                $('<%=$this->btnAddProduct->clientId%>').disabled='disabled';
                            </prop:ClientSide.onLoading>
                            <prop:ClientSide.onComplete>						                    
                                $('<%=$this->btnAddProduct->clientId%>').disabled='';
                                $('loading').hide();
                            </prop:ClientSide.OnComplete>
                        </com:TActiveButton>
                        <com:TActiveCustomValidator ValidationGroup="addproducttocart" Display="Fixed" ControlToValidate="txtQTY" FocusOnError="true" OnServerValidate="checkQTY" />								
                    </div>
                </div>            
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="box box-red">
                <div class="box-title">
                    <h3><i class="icon-shopping-cart"></i> Daftar Order #<%= $this->dataMember['order_id']%></h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                                                
                    </div>
                </div>
                <div class="box-content">    
                    <com:TActiveDataGrid
                        CssClass="table table-striped table-bordered"        
                        ID="gridCart"
                        DataKeyField="product_id"
                        AutoGenerateColumns="false"        
                        ShowFOoter="false" 
                        OnItemCreated="itemCreated"
                        OnEditCommand="editItem"
                        OnUpdateCommand="saveItem"
                        OnCancelCommand="cancelItem"
                        OnDeleteCommand="deleteItem"
                        >

                        <com:TActiveLiteralColumn
                            ID="ProductColumn"
                            HeaderText="Product"            
                            HeaderStyle.Width="160px"
                            DataField="product_name"
                            HeaderStyle.CssClass="left" 
                            ItemStyle.CssClass="left"
                            />
                        <com:TActiveLiteralColumn
                            ID="ModelColumn"
                            HeaderText="Model"
                            HeaderStyle.Width="110px"
                            DataField="model"
                            HeaderStyle.CssClass="left" 
                            ItemStyle.CssClass="left"
                            />
                        <com:TActiveBoundColumn
                            ID="QuantityColumn"
                            ItemStyle.HorizontalAlign="Right"
                            ItemStyle.Wrap="false"          
                            HeaderText="QTY"
                            HeaderStyle.Width="15px"
                            DataField="quantity"            
                            HeaderStyle.CssClass="right"
                            ItemStyle.CssClass="right"
                            />       
                        <com:TActiveLiteralColumn
                            ID="UnitPriceColumn"
                            HeaderText="Unit <br />Price"
                            HeaderStyle.Width="90px"
                            DataField="price"
                            HeaderStyle.CssClass="right" 
                            ItemStyle.CssClass="right"
                            />
                        <com:TActiveLiteralColumn
                            ID="TotalUnitPriceColumn"
                            HeaderText="Total Unit Price"
                            HeaderStyle.Width="90px"
                            DataField="totalunitprice"
                            HeaderStyle.CssClass="right" 
                            ItemStyle.CssClass="right"
                            />        
                        <com:TActiveBoundColumn
                            ID="LabaColumn"
                            ItemStyle.HorizontalAlign="Right"
                            ItemStyle.Wrap="false"          
                            HeaderText="Laba (%)"
                            HeaderStyle.Width="60px"
                            DataField="laba"            
                            HeaderStyle.CssClass="right"
                            ItemStyle.CssClass="right"
                            />  
                        <com:TActiveLiteralColumn
                            ID="OmsetColumn"
                            HeaderText="Omset"
                            HeaderStyle.Width="90px"
                            DataField="omset"
                            HeaderStyle.CssClass="right" 
                            ItemStyle.CssClass="right"
                            />
                        <com:TActiveLiteralColumn
                            ID="TotalPrice"
                            HeaderText="Total Price"
                            HeaderStyle.Width="90px"
                            DataField="totalprice"
                            HeaderStyle.CssClass="right" 
                            ItemStyle.CssClass="right"
                            />
                        <com:TActiveEditCommandColumn
                            ID="EditColumn"
                            HeaderText=""            
                            UpdateText="Save"         
                            HeaderStyle.Width="60px"
                            ItemStyle.CssClass="right"
                            />
                        <com:TActiveButtonColumn
                            ID="DeleteColumn"
                            HeaderText=""
                            HeaderStyle.Width="50px"            
                            Text="Delete"
                            CommandName="delete"
                            ItemStyle.CssClass="left"
                            />
                    </com:TActiveDataGrid>
                    <com:TActiveHiddenField ID="hiddentotalprice" />
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span6">
            <div class="box box-red">
                <div class="box-title">
                    <h3><i class="icon-road"></i> Pengiriman</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                                                
                    </div>
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#tab-1-1" data-toggle="tab">Existing Address</a></li>
                        <li><a href="#tab-1-2" data-toggle="tab">New Address</a></li>                        
                    </ul>
                </div>
                <div class="box-content">
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-1-1">
                            <strong></strong> 
                            <p><strong>Address :</strong> <%=$this->session['currentPageNewOrder']['datamember']['address']%>, <%=$this->session['currentPageNewOrder']['datamember']['city']%>, <%=$this->session['currentPageNewOrder']['datamember']['postal_code']%></p>
                        </div>
                        <div class="tab-pane" id="tab-1-2">
                            <p><strong>TAB #2</strong> </p>
                        </div>                        
                    </div>
                </div>
            </div>
        </div>
        <div class="span6">
            <div class="box box-red">
                <div class="box-title">
                    <h3><i class="icon-money"></i> Pembayaran</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                                                
                    </div>
                </div>
                <div class="box-content invoice-amount">
                    <div class="control-group">
                        <com:TLabel ForControl="cmbOrderStatus" CssClass="control-label" Text="Method" />                                        
                        <div class="controls"> 
                            <com:TActiveDropDownList ID="cmbPaymentMethod" AutoPostBack="false" />      
                            <com:TRequiredFieldValidator InitialValue="none" ValidationGroup="saveneworder" Display="Dynamic" ControlToValidate="cmbPaymentMethod" ErrorMessage="Please choose payment method."/>
                            <com:TActiveCustomValidator ValidationGroup="saveneworder" Display="Dynamic" ControlToValidate="cmbPaymentMethod" FocusOnError="true" OnServerValidate="checkNewOrder" />								
                        </div>
                    </div>
                    <div class="control-group">
                        <com:TLabel ForControl="cmbOrderStatus" CssClass="control-label" Text="Status Order" />                                        
                        <div class="controls"> 
                            <com:TActiveDropDownList ID="cmbOrderStatus" AutoPostBack="false" />
                            <com:TRequiredFieldValidator InitialValue="none" ValidationGroup="saveneworder" Display="Dynamic" ControlToValidate="cmbOrderStatus" ErrorMessage="<br />Please set order status of transaction."/>
                        </div>
                    </div>                    
                    <p>
                        <strong>Total Quantity: </strong>
                        <com:TActiveLabel Text="<%=$this->getTotalFromCart('quantity')%>" />
                    </p>
                    <p>
                        <strong>Total Unit Price:</strong>        
                        <com:TActiveLabel Text="<%=$this->finance->toRupiah($this->getTotalFromCart('totalunitprice'))%>" />
                    </p>
                    <p>
                        <strong>Total Omset:</strong>     
                        <com:TActiveLabel Text="<%=$this->finance->toRupiah($this->getTotalFromCart('omset'))%>" />
                    </p>
                    <p>
                        <strong>Total Price:</strong> 
                        <com:TActiveLabel Text="<%=$this->finance->toRupiah($this->getTotalFromCart('totalprice'))%>" />
                    </p>
                    <p>
                        <br>
                        <com:TActiveLinkButton ID="btnSave" CssClass="btn btn-success btn-xlarge" Text="Save Order" OnClick="saveOrder" ValidationGroup="saveneworder">
                            <prop:ClientSide.OnPreDispatch>
                                $('loading').show();                                
                                $('<%=$this->btnSave->ClientId%>').addClassName('disabled');                
                            </prop:ClientSide.OnPreDispatch>
                            <prop:ClientSide.OnLoading>
                                $('<%=$this->btnSave->ClientId%>').disabled='disabled';						
                            </prop:ClientSide.OnLoading>
                            <prop:ClientSide.OnComplete>																	
                                $('<%=$this->btnSave->ClientId%>').disabled='';						
                                $('<%=$this->btnSave->ClientId%>').removeClassName('disabled');                                		
                                $('loading').hide();
                            </prop:ClientSide.OnComplete>
                        </com:TActiveLinkButton> 
                        <com:TRequiredFieldValidator ValidationGroup="saveneworder" Display="Dynamic" ControlToValidate="hiddentotalprice" ErrorMessage="Total price must be greater than from zero (0)."/>
                    </p>
                </div>
            </div>
        </div>
    </div>    
</com:TActivePanel>
<com:TPanel Visible="<%= $this->getDefaultProcess() %>">        
    <div class="row-fluid">
        <div class="span12">
            <div class="box box-green">
                <div class="box-title">
                    <h3><i class="icon-zoom-in"></i> Search / Filter</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-down"></i></a>                                                
                    </div>
                </div>
                <div class="box-content">
                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                <com:TLabel ForControl="txtOrderid" CssClass="control-label" Text="No. Order" />  
                                <div class="controls">
                                    <com:TTextBox ID="txtOrderid" CssClass="input-small" Attributes.OnClick="clearCrossField(<%=$this->membername->ClientID%>,<%=$this->txtOrderid->ClientID%>)" />                                    
                                </div>
                            </div>
                            <div class="control-group">
                                <com:TLabel ForControl="membername" CssClass="control-label" Text="Nama Member" />  
                                <div class="controls">                                    
                                    <com:TTextBox ID="membername" CssClass="input-large" Attributes.OnClick="clearCrossField(<%=$this->txtOrderid->ClientID%>,<%=$this->membername->ClientID%>)" />                
                                </div>
                            </div>
                            <div class="control-group">
                                <com:TLabel ForControl="cmbStatusOrder" CssClass="control-label" Text="Status" />  
                                <div class="controls">                                    
                                    <com:TActiveDropDownList ID="cmbStatusOrder" OnSelectedIndexChanged="changeOrderStatus" CssClass="smallInput">                                                   
                                        <prop:ClientSide.OnPreDispatch>
                                            $('loading').show();                        				
                                        </prop:ClientSide.OnPreDispatch>
                                        <prop:ClientSide.OnLoading>
                                            $('<%=$this->cmbStatusOrder->ClientId%>').disabled='disabled';						
                                        </prop:ClientSide.OnLoading>
                                        <prop:ClientSide.OnComplete>																	
                                            $('<%=$this->cmbStatusOrder->ClientId%>').disabled='';						                        
                                            $('loading').hide();
                                        </prop:ClientSide.OnComplete>
                                    </com:TActiveDropDownList>
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group">
                                <com:TLabel ForControl="cmbPeriodAwal" CssClass="control-label" Text="Periode Awal" />  
                                <div class="controls">                                    
                                    <com:TActiveDatePicker ID="cmbPeriodAwal" DateFormat="dd-MMMM-yyyy" Culture="id"  FromYear="2013" UpToYear="<%= @date('Y') %>" InputMode="DropDownList" ShowCalendar="false" AutoPostBack="false"  />
                                </div>
                            </div>
                            <div class="control-group">
                                <com:TLabel ForControl="cmbPeriodAwal" CssClass="control-label" Text="Periode Akhir" />  
                                <div class="controls">                                    
                                    <com:TActiveDatePicker ID="cmbPeriodAkhir" DateFormat="dd-MMMM-yyyy" Culture="id"  FromYear="2013" UpToYear="<%= @date('Y') %>" InputMode="DropDownList" ShowCalendar="false" AutoPostBack="false" />
                                </div>
                            </div>
                            <div class="control-group">
                                <com:TLabel ForControl="chkWithDate" CssClass="control-label" Text="Search with Date" />  
                                <div class="controls">                                    
                                    <com:TActiveCheckBox ID="chkWithDate" AutoPostBack="false" />
                                </div>
                            </div>
                        </div>                        
                    </div>
                    <div class="form-actions">
                        <com:TActiveLinkButton ID="btnSearch" Text="<i class='icon-search'></i> Search" OnClick="searchOrder" CssClass="btn btn-primary">
                            <prop:ClientSide.OnPreDispatch>
                                $('loading').show();
                                $('<%=$this->btnSearch->ClientId%>').removeClassName('button');
                                $('<%=$this->btnSearch->ClientId%>').addClassName('button_grey');						
                            </prop:ClientSide.OnPreDispatch>
                            <prop:ClientSide.OnLoading>
                                $('<%=$this->btnSearch->ClientId%>').disabled='disabled';						
                            </prop:ClientSide.OnLoading>
                            <prop:ClientSide.OnComplete>																	
                                $('<%=$this->btnSearch->ClientId%>').disabled='';						
                                $('<%=$this->btnSearch->ClientId%>').removeClassName('button_grey');
                                $('<%=$this->btnSearch->ClientId%>').addClassName('button');												
                                $('loading').hide();
                            </prop:ClientSide.OnComplete>
                        </com:TActiveLinkButton>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    <div class="row-fluid">
        <div class="span12">
            <div class="box box-black">
                <div class="box-title">
                    <h3><i class="icon-shopping-cart"></i> Daftar Order</h3>
                    <div class="box-tool">
                        <a data-action="collapse" href="#"><i class="icon-chevron-up"></i></a>                         
                    </div>
                </div>
                <div class="box-content">
                    <div class="dataTables_wrapper form-inline">
                        <div class="row-fluid">
                            <div class="span7">
                                <ul class="things-to-do">
                            <li>
                                <p> 
                                    <i class="icon-money"></i>
                                    Total Daftar Order 
                                    <com:TActiveLabel ID="lblDaftarOrder" CssClass="value" />
                                </p>
                            </li>
                        </ul>
                            </div>
                            <div class="span5">
                                <div class="dataTables_filter">                                    
                                    <label>                                        
                                                                            
                                    </label>                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <com:TActiveRepeater ID="RepeaterS" DataKeyField="order_id" AllowPaging="true" PageSize="10" AllowCustomPaging="true">
                        <prop:HeaderTemplate>			
                            <table class="table table-advance">	
                                <thead>
                                <tr>												
                                    <th scope="col" width="30">NO</th>
                                    <th scope="col" width="50">Order ID</th>
                                    <th scope="col" width="200">Member Name</th>
                                    <th scope="col">Status</th>																		
                                    <th scope="col">Omset Belanja</th>																																		
                                    <th scope="col">Total Price</th>																																		
                                    <th scope="col">Data <br />Added</th>
                                    <th scope="col">Date <br />Modified</th>		
                                    <th scope="col" width="90">Actions</th>							
                                </tr>								
                                </thead>
                                <tbody>
                        </prop:HeaderTemplate>
                        <prop:ItemTemplate>
                            <tr class="table-flag-blue">
                                <td width="30"><%#$this->DataItem['no']%></td>
                                <td width="50"><com:TActiveLinkButton Text="<%#$this->DataItem['order_id']%>" ClientSide.PostState="false" OnClick="Page.showOrderDetails" Attributes.Title="Order Details" /></td>
                                <td><%#$this->DataItem['member_name']%></td>
                                <td><%#$this->DataItem['name']%></td>											
                                <td><%#$this->page->finance->toRupiah($this->DataItem['totalomset'])%></td>																						
                                <td><%#$this->page->finance->toRupiah($this->DataItem['totalprice'])%></td>																						
                                <td><%#$this->Page->TGL->tanggal('d/m/Y',$this->DataItem['date_added'])%></td>											
                                <td><%#$this->Page->TGL->tanggal('d/m/Y',$this->DataItem['date_modified'])%></td>																						
                                <td width="90">
                                    <com:TActiveLinkButton CssClass="btn btn-small" OnClick="Page.editRecord" Attributes.Title="Edit" Text="<i class='icon-edit'></i>" />
                                </td>  
                            </tr>
                        </prop:ItemTemplate>				
                        <prop:AlternatingItemTemplate>
                            <tr class="table-flag-orange">				
                                <td width="30"><%#$this->DataItem['no']%></td>
                                <td width="50"><com:TActiveLinkButton Text="<%#$this->DataItem['order_id']%>" ClientSide.PostState="false" OnClick="Page.showOrderDetails" Attributes.Title="Order Details" /></td>
                                <td><%#$this->DataItem['member_name']%></td>
                                <td><%#$this->DataItem['name']%></td>											
                                <td><%#$this->page->finance->toRupiah($this->DataItem['totalomset'])%></td>																						
                                <td><%#$this->page->finance->toRupiah($this->DataItem['totalprice'])%></td>																						
                                <td><%#$this->Page->TGL->tanggal('d/m/Y',$this->DataItem['date_added'])%></td>											
                                <td><%#$this->Page->TGL->tanggal('d/m/Y',$this->DataItem['date_modified'])%></td>																						
                                <td width="90">
                                    <com:TActiveLinkButton CssClass="btn btn-small" OnClick="Page.editRecord" Attributes.Title="Edit" Text="<i class='icon-edit'></i>" />
                                </td>                    
                            </tr>
                        </prop:AlternatingItemTemplate>
                        <prop:FooterTemplate>
                            <tr class="footer">
                                <td colspan="9">&nbsp;</td>
                            </tr>
                            </tbody>
                            </table>
                        </prop:FooterTemplate>	
                         <prop:EmptyTemplate>                    
                            <div class="alert alert-info">
                                <button class="close" data-dismiss="alert">×</button>
                                <p> Tidak ada order. </p>
                            </div>
                        </prop:EmptyTemplate>
                    </com:TActiveRepeater>
                    <%include Application.CustomPaging%>            
                </div>
            </div>
        </div>       
    </div>
</com:TPanel>
</com:TContent>
